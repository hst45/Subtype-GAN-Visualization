<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Model Performance</title>

    <script src="../static/js/core-js/jquery.min.js" type="text/javascript"></script>
    <script src="../static/js/core-js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../static/js/core-js/tether.min.js" type="text/javascript"></script>
    <script src="../static/js/performance-visualization/echarts.js" type="text/javascript"></script>
    <script src="../static/js/core-js/scripts.js" type="text/javascript"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/bootstrap.css">
    <link rel="stylesheet" href="static/css/styles.css">
</head>

<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
    <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="#page-top">Subtype GAN</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto my-2 my-lg-0">
                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
            </ul>
        </div>

    </div>
</nav>
<!-- Header -->
<header class="masthead" style="background-image: url('static/assets/img/bg-performance.jpg')">
    <div class="overlay"></div>
    <div class="container px-4 px-lg-5 h-100">
        <div class="row gx-4 gx-lg-5 h-100 align-items-center">
            <div class="col-md-10 mx-auto">
                <div class="post-heading">
                    <h1>Model Performance</h1>
                    <h2 class="subheading">A Comprehensive Analysis of the Performance of Subtype-GAN</h2>
                    <span class="meta">Two metrics were used to measure the model performance: the survival difference
                        between different subtypes and the number of significant clinical parameters (clinical parameters
                        include age, gender, stage, tumor size, degree of lymph node spread and metastasis). In addition,
                        the information difference score is used to show the differences between different algorithms and
                        to demonstrate the rationality and innovation of the model; the random forest analysis of four
                        histological data pairs of experimental results is used, which can guide the selection of features
                        for the input data.
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Charts -->
<div class='container mt-5 mb-6'>
    <div class="container px-4 px-lg-5" style="margin:128px 0 128px 0">
        <h2 class="text-center mt-0">Performances of Subtype-GAN and Other Approaches</h2>
        <hr class="divider"/>
        <div id="fig1" style="width: 800px;height:400px; margin:0 auto"></div>
        <script type="text/javascript">
            var chartDom = document.getElementById('fig1');
            var myChart = echarts.init(chartDom);
            var option;

            const approaches = ['SubtypeGAN', 'ae', 'vae', 'lracluster', 'NEMO', 'pins', 'mcca', 'spectral', 'kmeans', 'icluster', 'snf'];

            option = {
                title: [
                    {
                        text: 'the -log10 P-values',
                        left: 'center'
                    },
                ],
                dataset: [
                    {
                        // prettier-ignore
                        source: [
                            ['2.3010299956639813', '2.536277799924024', '5.698970004336019', '1.676121793239555', '2.3875381256339736', '1.6989700043360187', '4.455931955649724', '1.3187587626244128', '5.3979400086720375', '4.227679132365985'],
                            ['0.12090412049992724', '0.0767559813697235', '2.557867961568023', '1.0555173278498313', '0.712198270069774', '0.057495893831919324', '0.009661145212398569', '0.07007043991541213', '0.4190750243243807', '2.669316880566112'],
                            ['0.3142582613977364', '1.7106557626612127', '6.0', '1.0315170514460648', '1.431798275933005', '2.4865316776156754', '2.4089180208467798', '0.045757490560675115', '5.3979400086720375', '2.105906619742187'],
                            ['0.18508681872492605', '0.06651271215129456', '7.0', '0.8794260687941502', '0.2692177243336109', '2.185501681951694', '1.4559319556497243', '0.13966199342900631', '4.187053461991183', '2.2678233331492614'],
                            ['0.9706162223147904', '2.322494949761837', '4.292429823902063', '2.421777056025763', '2.1805718608811353', '1.9586073148417749', '4.721246399047171', '1.0969100130080565', '6.0', '2.2516382204482124'],
                            ['1.275724130399211', '1.408935392973501', '4.90062579080658', '0.33068311943388784', '2.692758818154724', '2.522291769231662', '2.2874571884747072', '0.9318141382538384', '3.9979830927822015', '1.8184458452428172'],
                            ['2.717789341279623', '1.0555173278498313', '7.0', '1.025698561974769', '0.8601209135987634', '2.1346985738974564', '0.9136401693252518', '1.2596373105057561', '4.958607314841775', '2.3959501106573877'],
                            ['0.10347378251044473', '1.8239087409443189', '4.6020599913279625', '2.617326580485205', '0.6478174818886375', '2.4873151694881366', '1.853871964321762', '0.3089185078770315', '0.7721132953863266', '1.853871964321762'],
                            ['0.15304467498017607', '0.5934598195660448', '4.2341680341949255', '2.2587056809417', '0.9956786262173575', '2.3350017568790413', '2.085387891853784', '0.07468790850035045', '5.698970004336019', '1.6020599913279623'],
                            ['0.6840296545430823', '0.9625735020593764', '3.9011081794249645', '2.1330824769231573', '0.6497519816658373', '1.0087739243075051', '1.0604807473813815', '0.3861581781239308', '1.3187587626244128', '1.0861861476162833'],
                            ['2.2257399158532665', '1.207608310501746', '4.455931955649724', '1.2441251443275085', '1.585026652029182', '2.1258877182168345', '3.8364261003298172', '0.5482135644757098', '5.0', '2.584492762209044'],
                        ]
                    },
                    {
                        transform: {
                            type: 'boxplot',
                            config: {
                                itemNameFormatter: function (params) {
                                    return approaches[params.value];
                                },
                                print: true
                            }
                        }
                    },
                    {
                        fromDatasetIndex: 1,
                        fromTransformResult: 1
                    }
                ],
                tooltip: {
                    trigger: 'item',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: 'center',
                    width: '80%',
                    bottom: '15%',
                },
                yAxis: {
                    type: 'category',
                    boundaryGap: true,
                    nameGap: 30,
                    splitArea: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    }
                },
                xAxis: {
                    type: 'value',
                    name: '-log10 P-values',
                    splitArea: {
                        show: true
                    }
                },
                series: [
                    {
                        name: 'boxplot',
                        type: 'boxplot',
                        datasetIndex: 1
                    },
                    {
                        name: 'outlier',
                        type: 'scatter',
                        encode: {x: 1, y: 0},
                        datasetIndex: 2
                    }
                ]
            };

            option && myChart.setOption(option);
        </script>

        <div class="text-center" id="fig2" style="width: 800px;height:400px; margin:0 auto"></div>
        <script type="text/javascript">
            var chartDom = document.getElementById('fig2');
            var myChart = echarts.init(chartDom);
            var option;

            option = {
                title: [
                    {
                        text: 'the Number of Signiﬁcant Clinical Parameters',
                        left: 'center'
                    },

                ],
                dataset: [
                    {
                        // prettier-ignore
                        source: [
                            [6.0, 5.0, 6.0, 1.0, 5.0, 2.0, 4.0, 2.0, 1.0, 2.0],
                            [0.0, 0.0, 5.0, 5.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0],
                            [5.0, 6.0, 6.0, 0.0, 2.0, 1.0, 1.0, 2.0, 1.0, 1.0],
                            [5.0, 3.0, 6.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0, 0.0],
                            [5.0, 6.0, 5.0, 1.0, 4.0, 2.0, 3.0, 1.0, 1.0, 1.0],
                            [2.0, 3.0, 6.0, 0.0, 3.0, 4.0, 2.0, 2.0, 1.0, 0.0],
                            [5.0, 3.0, 3.0, 1.0, 4.0, 4.0, 0.0, 2.0, 1.0, 1.0],
                            [3.0, 4.0, 6.0, 1.0, 1.0, 0.0, 2.0, 2.0, 1.0, 0.0],
                            [5.0, 3.0, 6.0, 1.0, 1.0, 0.0, 1.0, 2.0, 1.0, 0.0],
                            [4.0, 1.0, 4.0, 1.0, 1.0, 0.0, 1.0, 2.0, 1.0, 0.0],
                            [5.0, 6.0, 4.0, 0.0, 3.0, 2.0, 4.0, 1.0, 1.0, 1.0],
                        ]
                    },
                    {
                        transform: {
                            type: 'boxplot',
                            config: {
                                itemNameFormatter: function (params) {
                                    return approaches[params.value];
                                }
                            }
                        }
                    },
                    {
                        fromDatasetIndex: 1,
                        fromTransformResult: 1
                    }
                ],
                tooltip: {
                    trigger: 'item',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '10%',
                    right: '10%',
                    bottom: '15%'
                },
                yAxis: {
                    type: 'category',
                    boundaryGap: true,
                    nameGap: 30,
                    splitArea: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    }
                },
                xAxis: {
                    type: 'value',
                    name: 'the number of signiﬁcant clinical parameters',
                    splitArea: {
                        show: true
                    }
                },
                series: [
                    {
                        name: 'boxplot',
                        type: 'boxplot',
                        datasetIndex: 1
                    },
                    {
                        name: 'outlier',
                        type: 'scatter',
                        encode: {x: 1, y: 0},
                        datasetIndex: 2
                    }
                ]
            };

            option && myChart.setOption(option);
        </script>
    </div>

    <div class="container px-4 px-lg-5" style="margin-bottom: 128px">
        <h2 class="text-center mt-0">Contribution of Different Omics Data</h2>
        <hr class="divider"/>
        <div id="fig3" style="width: 800px;height:600px; margin:0 auto"></div>
        <script type="text/javascript">
            var app = {};
            var chartDom = document.getElementById('fig3');
            var myChart = echarts.init(chartDom);
            var option;

            const posList = [
                'left',
                'right',
                'top',
                'bottom',
                'inside',
                'insideTop',
                'insideLeft',
                'insideRight',
                'insideBottom',
                'insideTopLeft',
                'insideTopRight',
                'insideBottomLeft',
                'insideBottomRight'
            ];
            app.configParameters = {
                rotate: {
                    min: -90,
                    max: 90
                },
                align: {
                    options: {
                        left: 'left',
                        center: 'center',
                        right: 'right'
                    }
                },
                verticalAlign: {
                    options: {
                        top: 'top',
                        middle: 'middle',
                        bottom: 'bottom'
                    }
                },
                position: {
                    options: posList.reduce(function (map, pos) {
                        map[pos] = pos;
                        return map;
                    }, {})
                },
                distance: {
                    min: 0,
                    max: 100
                }
            };
            app.config = {
                rotate: 90,
                align: 'left',
                verticalAlign: 'middle',
                position: 'insideBottom',
                distance: 15,
                onChange: function () {
                    const labelOption = {
                        rotate: app.config.rotate,
                        align: app.config.align,
                        verticalAlign: app.config.verticalAlign,
                        position: app.config.position,
                        distance: app.config.distance
                    };
                    myChart.setOption({
                        series: [
                            {
                                label: labelOption
                            },
                            {
                                label: labelOption
                            },
                            {
                                label: labelOption
                            },
                            {
                                label: labelOption
                            }
                        ]
                    });
                }
            };
            const labelOption = {
                show: false,
                position: app.config.position,
                distance: app.config.distance,
                align: app.config.align,
                verticalAlign: app.config.verticalAlign,
                rotate: app.config.rotate,
                formatter: '{c}  {name|{a}}',
                fontSize: 16,
                rich: {
                    name: {}
                }
            };
            option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    bottom: 15,
                    data: ['Methylation', 'mRNA', 'CN', 'miRNA'],
                },
                toolbox: {
                    show: true,
                    orient: 'vertical',
                    left: 'right',
                    top: 'center',
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {show: true, type: ['bar', 'stack']},
                        restore: {show: true},
                        saveAsImage: {show: true}
                    }
                },
                xAxis: [
                    {
                        type: 'category',
                        axisTick: {show: false},
                        data: ['BRCA', 'BLCA', 'KIRC', 'GBM', 'LUAD', 'PAAD', 'SKCM', 'STAD', 'UCEC', 'UVM']
                    }
                ],
                yAxis: [
                    {
                        type: 'value'
                    }
                ],
                series: [
                    {
                        name: 'Methylation',
                        type: 'bar',
                        barGap: 0,
                        label: labelOption,
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.1861894447806495, 0.184049649378174, 0.23250418769531206, 0.22186162324409184, 0.41711993034522044, 0.5442259508389833, 0.529663947446874, 0.546049790699804, 0.18932533540798024, 0.19984674099827468],
                    },
                    {
                        name: 'mRNA',
                        type: 'bar',
                        label: labelOption,
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.634567792822462, 0.626708586105835, 0.5961725188585119, 0.6273621874264336, 0.4562465152751982, 0.3630494345850781, 0.36099640958049245, 0.3531390362067014, 0.5878032902496055, 0.37655834427071244]
                    },
                    {
                        name: 'CN',
                        type: 'bar',
                        label: labelOption,
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.15033345775881726, 0.1416002204894546, 0.13192783383657322, 0.1507761893294746, 0.09966521158711031, 0.0735294003385325, 0.08657984564816207, 0.06479585239538471, 0.18403367842826723, 0.3887469035101353]
                    },
                    {
                        name: 'miRNA',
                        type: 'bar',
                        label: labelOption,
                        emphasis: {
                            focus: 'series'
                        },
                        data: [0.028909304638071922, 0.04764154402653635, 0.03939545960960336, 0.0, 0.026968342792471695, 0.019195214237406253, 0.02275979732447226, 0.036015320698108665, 0.03883769591414693, 0.03484801122087759]
                    }
                ]
            };

            option && myChart.setOption(option);

        </script>
    </div>

    <div class="container px-4 px-lg-5" style="margin-bottom: 128px">
        <h2 class="text-center mt-0">The P-values of Friedman Test</h2>
        <hr class="divider"/>
        <div id="fig4" style="width: 860px;height:1000px; margin:0 auto"></div>
        <script type="text/javascript">
            var chartDom = document.getElementById('fig4');
            var myChart = echarts.init(chartDom);
            var option;

            // prettier-ignore
            const axis_name = ['AE', 'iCluster', 'LRAcluster', 'K-means', 'Spectral', 'VAE', 'MCCA', 'PINS', 'SNF', 'NEMO', 'Subtype-GAN'];

            const raw_data = [
                [1, 0.63, 0.37, 0.27, 0.27, 0.22, 0.09, 0.08, 0.04, 0.01, 0],
                [0.63, 1, 0.6, 0.48, 0.46, 0.42, 0.22, 0.19, 0.09, 0.04, 0.01],
                [0.37, 0.6, 1, 0.81, 0.79, 0.7, 0.42, 0.38, 0.22, 0.11, 0.04],
                [0.27, 0.48, 0.81, 1, 0.97, 0.88, 0.53, 0.48, 0.3, 0.18, 0.08],
                [0.27, 0.46, 0.79, 0.97, 1, 0.9, 0.55, 0.48, 0.3, 0.19, 0.08],
                [0.22, 0.42, 0.7, 0.88, 0.9, 1, 0.61, 0.55, 0.37, 0.22, 0.09],
                [0.09, 0.22, 0.42, 0.53, 0.55, 0.61, 1, 0.9, 0.61, 0.41, 0.22],
                [0.08, 0.19, 0.38, 0.48, 0.48, 0.55, 0.9, 1, 0.67, 0.45, 0.24],
                [0.04, 0.09, 0.22, 0.3, 0.3, 0.37, 0.61, 0.67, 1, 0.67, 0.42],
                [0.01, 0.04, 0.11, 0.18, 0.19, 0.22, 0.41, 0.45, 0.67, 1, 0.62],
                [0, 0.01, 0.04, 0.08, 0.08, 0.09, 0.22, 0.24, 0.42, 0.62, 1]
            ];

            const data = [];
            for (let i = 0; i < raw_data.length; i++) {
                for (let j = 0; j < raw_data[0].length; j++) {
                    if (raw_data[i][j] == 1) {
                        data.push([j, i, '-']);
                        continue;
                    }
                    data.push([j, i, raw_data[i][j]]);
                }
            }
            console.log(data);

            option = {
                tooltip: {
                    position: 'top'
                },
                grid: {
                    height: '65%',
                },
                xAxis: {
                    type: 'category',
                    data: axis_name,
                    splitArea: {
                        show: true
                    },
                    "axisLabel": {
                        interval: 0,
                        Rotate: 90
                    }
                },
                yAxis: {
                    type: 'category',
                    data: axis_name,
                    splitArea: {
                        show: true
                    },
                    grid: {
                        left: '10%',
                        bottom: '35%'
                    },

                },
                visualMap: {
                    min: 0,
                    max: 1,
                    calculable: true,
                    type: 'continuous',
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '17%',

                },
                series: [
                    {
                        name: '相似度',
                        type: 'heatmap',
                        data: data,
                        label: {
                            show: true,
                        },
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };

            option && myChart.setOption(option);
        </script>
    </div>
</div>
<!-- Footer -->
<footer class="bg-light py-5">
    <div class="container px-4 px-lg-5">
        <div class="small text-center text-muted">
            Copyright &copy; 2022 - East China University of Science and Technology Xiaoyang Fang
        </div>
    </div>
</footer>
</body>

</html>